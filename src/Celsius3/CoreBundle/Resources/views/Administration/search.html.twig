{% extends 'Celsius3CoreBundle:Administration:layout.html.twig' %}

{% block title %}
    {{ 'Search results'|trans }}
{% endblock %}

{% block content %}

    {% set currentPath = path(app.request.attributes.get('_route'), app.request.attributes.get('_route_params')) ~ '?keyword=' ~ keyword ~ '&type=' ~ type %}

    <h3>{{ 'Search results'|trans }}</h3>
    <div class="row">
        <div class="col-md-12">
            <div class="row">
                <div class="col-md-12">
                    <ul class="nav nav-pills pull-right">
                        <li class="{% if(state is null) %} active {% endif %}">
                            <a href="{{ currentPath }}">{{ 'all' | trans }}({{ total }})</a>
                        </li>
                        {% for orderState,count in states %}
                            {% if (count > 0) %}
                                <li class="{% if(state == orderState) %} active {% endif %}">
                                    <a href="{{ currentPath ~ '&state=' ~ orderState }}">{{ orderState | trans }}({{count}})</a>
                                </li>
                            {% endif %}
                        {% endfor %}
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            <div class="navigation">
                {{ knp_pagination_render(pagination) }}
            </div>

            {% for element in pagination %}
                {% include 'Celsius3CoreBundle:AdminOrder:_index_element.html.twig' %}
            {% endfor %}

            <div class="navigation">
                {{ knp_pagination_render(pagination) }}
            </div>
        </div>
    </div>
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script type="text/javascript">
        $(document).ready(function () {
            $(document)
                    .on('mouseover', 'div.main_info', function () {
                        $(this).addClass('order-on-mouseover');
                        $(this).css('cursor', 'pointer');
                    })
                    .on('mouseout', 'div.main_info', function () {
                        $(this).removeClass('order-on-mouseover');
                        $(this).css('cursor', 'auto');
                    })
                    .on('click', 'div.main_info', function () {
                        var url = Routing.generate('admin_order_show', {id: $(this).attr('data-order-id')})
                        $(location).attr("href", url);
                    });
        });

    </script>
{% endblock %}